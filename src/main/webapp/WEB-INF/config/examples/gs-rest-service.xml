<!DOCTYPE aspectran PUBLIC "-//ASPECTRAN//DTD Aspectran Configuration 5.0//EN"
                           "http://aspectran.github.io/dtd/aspectran-5.dtd">

<aspectran>

    <description>
        A collection of Translets for the Restful Web Service example.
    </description>

    <settings>
        <setting name="transletNamePattern" value="/examples/gs-rest-service/*"/>
    </settings>

    <bean class="com.aspectran.demosite.examples.customer.CustomerDao"/>

    <bean class="com.aspectran.demosite.examples.customer.CustomerAction"/>

    <translet name="/">
        <dispatch name="templates/default">
            <echo id="page">
                <attributes>
                    <item name="headline">Building a RESTful Web Service</item>
                    <item name="teaser">A sample page that uses RESTful web services using HTTP support methods such as GET, PUT, POST, and DELETE.</item>
                    <item name="include">examples/gs-rest-service</item>
                </attributes>
            </echo>
        </dispatch>
    </translet>

    <translet name="customers" method="GET">
        <description>
            Returns a list of all customers in JSON format.
        </description>
        <action id="customers" bean="class:com.aspectran.demosite.examples.customer.CustomerAction" method="getCustomerList"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="customers/${id:guest}" method="GET">
        <description>
            Retrieve customer info by a given id parameter.
        </description>
        <action id="customer" bean="class:com.aspectran.demosite.examples.customer.CustomerAction" method="getCustomer"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="customers" method="POST">
        <description>
            Register a new customer.
        </description>
        <action bean="class:com.aspectran.demosite.examples.customer.CustomerAction" method="insertCustomer"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="customers/${id}" method="PUT">
        <description>
            Update customer info by a given id parameter.
        </description>
        <action bean="class:com.aspectran.demosite.examples.customer.CustomerAction" method="updateCustomer"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="customers/${id}/attributes" method="PUT">
        <description>
            Update customer's attributes by a given id parameter.
        </description>
        <action id="result" bean="class:com.aspectran.demosite.examples.customer.CustomerAction" method="updateAttributes"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="customers/${id}" method="DELETE">
        <description>
            Delete customer info by a given id parameter.
        </description>
        <action id="result" bean="class:com.aspectran.demosite.examples.customer.CustomerAction" method="deleteCustomer"/>
        <transform type="transform/json"/>
    </translet>

</aspectran>